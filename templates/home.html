{% extends 'base.html' %}


{% block content %}
<div class="content">
	{% load static %}

	<p>
		{% if user.is_authenticated %}
			<a class="button is-primary orbitron" href="/game/new">Create Game</a>
		{% else %}
			<a href="{% url 'signup' %}">Sign up</a> or <a href="{% url 'login' %}">log in</a> to create a game.
			<br>Or join an existing game:
		{% endif %}
	</p>

	<form action="/game/search/" method="get">
		<div class="field has-addons">
			<div class="control">
				<input type="text" class="input orbitron" name="game_identifier" placeholder="Game Code">
			</div>
			<div class="control">
				<button type="submit" class="button is-primary orbitron">Join</button>
			</div>
		</div>
	</form>

	{% if my_turn %}
		<h3 class="orbitron">Your Turn</h3>
		<div id="app">
			{% for game in my_turn %}
				<div class="card is-inline-block" style="vertical-align:top">
					<header class="card-header">
						<p class="card-header-title" style="padding: 0.5rem 1rem">
							<a href="/game/{{ game.code }}">{{ game.code }}</a>
						</p>
					</header>

					<div class="card-content" style="text-align:center; padding:0.5rem;">
						<svg width="125" height="125" viewbox="0 0 100 100" style="margin-bottom:-1rem">
							<board :x=50 :y=50 :size=50 hfen="{{ game.hfen }}"/>
						</svg>
					</div>

					<div class="card-footer help" style="padding:0.2rem 0.5rem">
						<pre style="line-height:0.8rem">{{ game.hpgn_player_tags }}</pre>
					</div>
				</div>
			{% endfor %}
		</div>
	{% endif %}
</div>

{% comment %}
<form action="{% url 'create_or_join' %}" method="post">
	{% csrf_token %}
	<div class="field has-addons">
		<div class="control">
			{{ form.name }}
		</div>
		<div class="control">
			<button class="button is-link">Go</button>
		</div>
	</div>
	<p class="help">Create a game, or join a game in progress.</p>
</form>
{% endcomment %}
{% endblock content %}


{% block scripts %}
{% if my_turn %}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.common.dev.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/3.5.1/vuex.min.js"></script>
	<script> var IS_LIVE = false </script>
	<script src="{% static 'js/game.js' %}"></script>
{% endif %}
{% endblock scripts %}
