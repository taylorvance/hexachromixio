{% extends 'base.html' %}

{% block title %}Profile - Hexachromix{% endblock %}

{% block content %}
<script src="https://kit.fontawesome.com/7429ed9b88.js" crossorigin="anonymous"></script>

<style>
	.fa-btn {
		background: none;
		border: none;
		font-size: 1.2rem;
		padding: 0;
	}
	.fa-btn span {
		color: #666;
		cursor: pointer;
	}
</style>

<div class="content">
	{% if False %}
	<div class="columns">
		<div class="column is-narrow">
			<form action="/friends/remove/" method="post">
				{% csrf_token %}

				<table class="table is-narrow">
					<tr>
						<th colspan="2" class="has-text-left">
							Friends
						</th>
					</tr>
					{% for friend in friends %}
						<tr>
							<td>{{ friend.username }}</td>
							<td class="has-text-right" style="padding-left:3rem">
								<button type="submit" class="fa-btn" name="upk" value="{{ friend.pk }}">
									<span class="icon">
										<i class="fas fa-minus-circle" title="Remove friend"></i>
									</span>
								</button>
							</td>
						</tr>
					{% endfor %}
				</table>
			</form>

			<br>
			<h6>Send a friend request</h6>
			<form action="/friends/request/" method="post" style="display:inline; padding:0;">
				{% csrf_token %}

				<div style="width:100%">
					<input type="text" class="input is-small" name="name" style="width:auto">

					<button type="submit" class="fa-btn">
						<span class="icon is-medium">
							<i class="fas fa-plus-circle" title="Send friend request"></i>
						</span>
					</button>
				</div>
			</form>
		</div>

		<div class="column is-narrow">
			<table class="table is-narrow">
				{% if pending_you %}
					<tr>
						<th colspan="2" class="has-text-left">
							Friend Requests
						</th>
					</tr>
					{% for fr in pending_you %}
						<tr>
							<td>{{ fr.requester.username }}</td>
							<td class="has-text-right" style="padding-left:3rem">
								<form action="/friends/accept/" method="post" style="display:inline; padding:0;">
									{% csrf_token %}
									<button type="submit" class="fa-btn" name="frpk" value="{{ fr.pk }}">
										<span class="icon">
											<i class="fas fa-check-circle" title="Accept friend request"></i>
										</span>
									</button>
								</form>
								<form action="/friends/decline/" method="post" style="display:inline; padding:0;">
									{% csrf_token %}
									<button type="submit" class="fa-btn" name="frpk" value="{{ fr.pk }}">
										<span class="icon">
											<i class="fas fa-times-circle" title="Reject friend request"></i>
										</span>
									</button>
								</form>
							</td>
						</tr>
					{% endfor %}
				{% endif %}

				{% if pending_them %}
					<tr>
						<th colspan="2" class="has-text-left">
							Pending Requests
						</th>
					</tr>
					{% for fr in pending_them %}
						<tr>
							<td>{{ fr.responder.username }}</td>
							<td class="has-text-right" style="padding-left:3rem">
								<form action="/friends/cancel/" method="post">
									{% csrf_token %}
									<button type="submit" class="fa-btn" name="frpk" value="{{ fr.pk }}">
										<span class="icon">
											<i class="fas fa-minus-circle" title="Cancel friend request"></i>
										</span>
									</button>
								</form>
							</td>
						</tr>
					{% endfor %}
				{% endif %}
			</table>
		</div>
	</div>
	{% endif %}

	<h4>Games</h4>
	<div class="table-container">
		<table class="table has-text-left">
			<thead>
				<tr>
					{% if user.is_staff %}
						<th align="right">pk</th>
					{% endif %}
					<th>UID</th>
					<th>Created By</th>
					<th>Variant</th>
					<th>Result</th>
					<th>Winner</th>
					<th align="right"># Moves</th>
					<th>HFEN</th>
				</tr>
			</thead>
			<tbody>
				{% for game in games %}
					<tr>
						{% if user.is_staff %}
							<td align="right">{{ game.id }}</td>
						{% endif %}
						<td style="font-family: 'Lucida Console', Monaco, monospace">
							<a href="/game/{{ game.uid }}">{{ game.uid }}</a>
						</td>
						<td>{{ game.author.username }}</td>
						<td>{{ game.get_variant_display }}</td>
						<td>{{ game.result }}</td>
						<td>{{ game.winner }}</td>
						<td align="right">{{ game.moves | length }}</td>
						<td style="font-family: 'Lucida Console', Monaco, monospace">{{ game.hfen }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
